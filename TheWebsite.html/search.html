<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search for a Ride - VIT Chennai Carpool</title>
</head>
<body style="color:black;background-color: rgba(255, 192, 203, 0.098);">
    <header>
        <h1>Search for a Ride</h1>
        <nav>
            <a href="index.html"><button>Home</button></a> | 
            <a href="offer.html"><button>Offer a Ride</button></a>
        </nav>
    </header>

    <main>
        <form id="searchForm">
            <label for="from">From:</label><br>
            <input type="text" id="from" name="from" required><br><br>

            <label for="to">To:</label><br>
            <input type="text" id="to" name="to" required><br><br>

            <label for="date">Date:</label><br>
            <input type="date" id="date" name="date" required><br><br>

            <button type="button" onclick="searchRides()">Search</button>
        </form>

        <!-- Section to display search results -->
        <section id="searchResults"></section>
    </main>

    <script>
        async function searchRides() {
            const from = document.getElementById('from').value;
            const to = document.getElementById('to').value;
            const date = document.getElementById('date').value;

            try {
                const response = await fetch(`http://localhost:3000/search?from=${from}&to=${to}&date=${date}`);
                const rides = await response.json();

                const resultsSection = document.getElementById('searchResults');
                resultsSection.innerHTML = ''; // Clear previous results

                if (rides.length === 0) {
                    resultsSection.innerHTML = '<p>No rides found</p>';
                } else {
                    rides.forEach(ride => {
                        const rideInfo = `
                            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px;">
                                <p><strong>From:</strong> ${ride.departure_location}</p>
                                <p><strong>To:</strong> ${ride.destination}</p>
                                <p><strong>Date:</strong> ${new Date(ride.departure_time).toLocaleDateString()}</p>
                                <p><strong>Seats Available:</strong> ${ride.seats_available}</p>
                            </div>
                        `;
                        resultsSection.innerHTML += rideInfo;
                    });
                }
            } catch (error) {
                console.error('Error searching rides:', error);
                alert('Error searching rides');
            }
        }
    </script>
</body>
</html>
